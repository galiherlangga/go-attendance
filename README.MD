# Go Payroll Processing System ğŸ§¾

A payroll management system built with **Go (Gin Gonic)**, **PostgreSQL**, and **Redis**.  
It supports employee attendance tracking, overtime, reimbursements, payslip generation, and admin reporting.

---

## ğŸŒŸ Features

- JWT-based authentication (Admin & Employee roles)
- Monthly payroll periods with prorated salary
- Overtime and reimbursement handling
- Payslip generation with detailed breakdowns
- Admin summary reporting
- Redis caching for performance
- REST API using Gin Gonic
- Interactive Swagger documentation

---

## ğŸ“š Prerequisites

Ensure you have the following installed:

- [Go 1.24+](https://golang.org/dl/)
- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## ğŸ›  Tech Stack

- **Backend:** Go + Gin
- **Database:** PostgreSQL
- **Cache:** Redis
- **Docs:** Swagger via swaggo
- **Containerized with:** Docker Compose

---

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ app/
â”œâ”€â”€ config/
â”œâ”€â”€ docs/
â”œâ”€â”€ pkg/
â”œâ”€â”€ routes/
â”œâ”€â”€ tests/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ main.go
â”œâ”€â”€ README.md
â”œâ”€â”€ .env.example
â””â”€â”€ .env
```

---

## âš™ï¸ Environment Variables

Create a `.env` file in the root directory:

```env
# PostgreSQL
DB_HOST=db
DB_PORT=5432
DB_USER=dev
DB_PASSWORD=yourpassword
DB_NAME=go-attendance

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASS=password
REDIS_DB=0

# Server
PORT=8010
JWT_SECRET=your_jwt_secret
```

---

## ğŸ³ Run with Docker Compose

Build and run the application:

```bash
docker-compose up --build
```

- App: `http://localhost:8010`
- Swagger UI: `http://localhost:8010/swagger/index.html`
- PostgreSQL: Port `5432`
- Redis: Port `6379`

---

## ğŸ§ª API Documentation (Swagger UI)

Interactive API docs available at:

```
http://localhost:8010/swagger/index.html
```

If you change handler annotations or models, regenerate docs using:

```bash
swag init
```

---

## ğŸ” Authentication

Uses JWT stored in HTTP-only cookies.

### ğŸ”‘ Login

```http
POST /auth/login
```

Example Response:

```json
{
  "access_token": "....",
  "refresh_token": "...."
}
```

The `access_token` will be stored in cookies and used for protected endpoints.

If testing in Swagger UI, manually add a cookie:

```
Name: access_token
Value: <your JWT token>
```

---

## ğŸ§° Development Notes

If you want to run locally without Docker:

```bash
go mod tidy
go run main.go
```

Ensure PostgreSQL and Redis are running with correct `.env` config.

---

## âœ… Health Check

Verify if the API server is running:

```bash
http://localhost:8010/health
```

---

## ğŸ§ª Common Issues

### âŒ Server returned nothing

Ensure Gin binds to `0.0.0.0` in `main.go`:

```go
r.Run("0.0.0.0:" + port)
```

### âŒ Can't connect to DB or Redis?

Ensure your `.env` uses service names in Docker:

```env
DB_HOST=db
REDIS_HOST=redis
```

---

## ğŸ§¹ Stopping & Cleaning Up

To stop the Docker containers:

```bash
docker-compose down
```

To remove volumes (Postgres data):

```bash
docker-compose down -v
```

---

## ğŸ™Œ Contributing

Feel free to fork, open issues or PRs. This is a work in progress and your feedback is welcome!

---

## ğŸ“„ License

MIT License
